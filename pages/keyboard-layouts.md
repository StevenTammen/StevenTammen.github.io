---
permalink: /keyboard-layouts/
layout: layout
title: Keyboard Layouts
---

<div class="center">

   <h1>Keyboard Layouts</h1>
   
   <a href="https://github.com/StevenTammen/steventammen.github.io/edit/master/pages/keyboard-layouts.md" target="_blank">
     <img src="https://steventammen.github.io/assets/images/GitHub.png" height="30" width="30">
   </a> &nbsp; &nbsp;
   
   <a href="http://prose.io/#StevenTammen/steventammen.github.io/edit/master/pages/keyboard-layouts.md" target="_blank">
     <img src="https://steventammen.github.io/assets/images/Prose.png" height="30" width="30">
   </a>
   
</div>

<br/>


## Pre-optimization Considerations

Before you spend time optimizing the character layout of your keyboard, you need to first make sure that you have a [well-designed keyboard](https://steventammen.com/keyboards/), and that your [work environment is setup properly](https://steventammen.com/work-environment/). Failing to account for these things (which are really more important), no matter how good your character layout ends up being, will put you at a much higher risk for Repetitive Stress Injury (RSI) and Carpal Tunnel Syndrome (CTS).

Optimizing the character layout of your keyboard without first dealing with your workstation ergonomics is like fixing a small leak in a ship while ignoring the gaping hole in the hull — any benefit you gain here will be vastly overshadowed by the gains from improving these other areas. Again, let me repeat myself, focusing on the character layout before settling these other matters is *not* wise, and I suggest you take some time to fix any deficiencies in your current equipment/habits before continuing.

## Reasons Why You Should Optimize

### Reduced Typing Effort

Far and away the biggest benefit optimized keyboard layouts give is a greatly reduced overall typing effort. As will be discussed below, optimized layouts significantly reduce the amount of distance your fingers need to travel by putting frequently used keys in favorable positions (like the home row), and balance finger and hand distribution so that effort is spread out. They also strive to make frequent two-letter combinations (called digrams) and three-letter combinations (called trigrams) easy to type: th, he, tha, ion, and so forth.

It is perhaps easiest to demonstrate the benefits of optimized layouts by counterexample: using "problem words" from QWERTY.

1. On QWERTY try typing the word "stewardesses." It should be immediately obvious what the problem here is: your left hand does all the work while your right hand just sits there doing nothing!
2. Now try typing the word "minimum." Aside from being another example of one hand doing all the work, QWERTY's minimum has additional problems: you have to jump over the home row to get from M and N to I and U, and you have to use the same finger to type M and U in succession. As variables, these are usually called "row jumping" (or "hurdling") and "same-finger", respectively, and most optimized layouts try to minimize them as much as possible.

Basically, optimized layouts have less words like QWERTY's "stewardesses" and "minimum" -- words that are hard to type, split the load unequally among fingers and/or hands, require your fingers to travel further, require row jumps, etc. Consequently, typing is less effortful on optimized layouts.

### Reduced Risk of RSI

Theoretically, the reduced overall effort needed to type on an optimized layout could lead to a delay in onset and/or remission of symptoms for those suffering from RSI, but I am not aware of any rigorous scholarship on the subject (though anecdotal success stories abound, they are not verifiable, and may be demonstrating the power of the placebo effect rather than the power of optimized keyboard layouts). On the other hand, it would make sense if less effort over time led to less "repetitive stress" overall (even if science hasn't verified this yet), so giving it a shot may still be worth it.

It is once more worth pointing out that a well-designed keyboard and proper workstation ergonomics are much more important than a character layout ever will be on this front, so if you don't have these things in order, an optimized keyboard layout won't save you from RSI.

### Increased Typing Speed

While this is perhaps the most controversial of the benefits (and is yet to be verified in a rigorous way, like RSI reduction above), there is a theoretical basis for faster typing on optimized layouts. For example:

- Optimized layouts require less overall finger travel distance, with most of the most frequent letters and combinations requiring no movement from the home row. Less required movement ought to lead to faster speeds, all other things being equal.
- Optimized layouts have higher hand alternation than QWERTY. Hand alternation makes it easier to line up the next letter when typing the previous one, since your fingers on the next-letter hand will not be out of position from typing letters on the top or bottom rows. (Cf. the QWERTY digraphs "he" and "in". For the former -- an example of hand alternation -- E can easily be lined up while you are pressing the H key since they are on different hands despite being on different rows. For the latter, it is harder to line up N when you are pressing I since I is on the top row of the right hand and N is on the bottom row of the right hand). This too should theoretically lead to faster speeds.
- Optimized layouts have less same-finger (as in QWERTY "fr" or "ed"). It is not possible to line up subsequent letters in any way for same-finger digraphs, making them the slowest letter combinations. It follows then that layouts with less same-finger combinations will enable faster typing.

I'm sure there are other such features that could be mentioned in support of optimized layouts being faster (i.e., this list is not intended to be comprehensive); however, until rigorous studies are done, all of this is theoretical. The effects mentioned above are going to be much less significant than practice overall -- which is why some QWERTY typists like [Sean Wrona](https://www.youtube.com/watch?v=4GDusA21cEA) will destroy the vast majority of people who type on optimized layouts.

## Reasons Why You Should Not Optimize

### Priorities

Please have a look at [this page](https://steventammen.com/priorities/).

Keyboard layout optimization must be taken as an investment of lower marginal benefit than many things before it. It is a worthy investment, but it is not the worthiest of your consideration unless several more important things have been taken care of beforehand.

I would encourage you to go through that link and make sure you have those things in good order before you even consider sinking in time on the keyboard optimization front.

### You May Type Too Little Or Too Much For Keyboard Layout Optimization To Be Worth It

If you already touch type on a layout like QWERTY or Dvorak, and you do not type very much in your profession or hobbies outside of your profession, keyboard layout optimization will never be worth your while. You will never make up the time you spend making a more efficient layout for your use case and learning it because you will never type enough for the advantages to be realized. This will be discussed more extensively in some of the sections below, but suffice it to say that the opportunity cost involved is great enough that most people probably shouldn't bother. There are some very zealous people that try to "sell" the ideas of optimized keyboard layouts far more than what the data allows. They are objectively better. But not worth 40+ hours of practice to switch better


### You May Be Better Served By Stenography

**TL;DR version:** Steno is unarguably faster than typing, and certain people would be better served learning stenography instead of a more optimized keyboard layout. 

In a vacuum, machine shorthand (aka stenography, commonly abbreviated "steno") is objectively superior to plain typing in just about every way. The world record for machine shorthand transcription is over 360 WPM. Think about that for a second. *Three hundred and sixty words per minute is really stinkin' fast*.

If the idea of writing that fast intrigues you, you should read a series of articles --starting [here](https://stenoknight.com/SpeakFingers.html) -- written by Mirabai Knight, the stenographer behind Plover (the only free stenography program). Mirabai argues that there are reasons other than speed for steno (fluency of thought, for example). This is a good series, but strawmans keyboard layouts to an extent. For example, if you automatically space out punctuation and autocapitalize (just like stenography does), come up with shorthand forms for very common words and phrases (just like stenograpy does), and use a system of prefixes, suffixes, and phrase-enders according to personally-determined patterns (just like stenography does), all of the disparities cited in this series shrink significantly.

In other words, if you start comparing apples-to-apples, while stenography still wins overall since phonetic input will always be faster/more efficient than orthographic input, the differences are not nearly as vast as protrayed here. (Note: I don't think Mirabai is at all at fault for drawing the comparisons -- most people don't use keyboards particularly effectively, so her points stand in the vast majority of cases).

Why am I taking pains to qualify these claims? If stenography is simply better in the abstract, even if not by as much as advertised, why shouldn't everybody learn it? Well, the thing is, learning stenography is more than just learning a different character layout. For example, you have to learn:

- How to press multiple keys at the same time (known as "chording"), sometimes with the same finger.
- How to consciously distinguish phonemes in pronunciation (everyone does this unconsciously, but most people don't have any practice thinking about it).
- How to split words into syllabifications to match outlines in the translation dictionary. (While the dictionary usually has outlines for multiple syllabifications, sometimes people will syllabify words in non-standard ways that aren't defined, and will need try other ways).
- How to deal with the word boundary conflicts introduced from phonetic writing (for example, "we walked around the *lighthouse*" vs. "we walked around the *light house*").
- How to deal with homophones (by, buy, bye; there, their, they're; etc.).
- How to write the full list of words without phonetic outlines (a condition known as "brief solitude"). Most of these are very high frequency words, which is both good and bad -- you'll basically have to learn them all before you can write anything, but you'll learn them fast since you'll need to use them a lot.
- etc.

This isn't even comprehensive. Stenography is an entirely different text-entry paradigm than typing, and for people without any linguistics experience, the majority of the concepts and vocabulary introduced will be things you've never heard of before.

The numbers vary on how long it takes for people to get to high speeds. There are people like [Stanley Sakai](http://stanographer.com/) who got to 225+ WPM in months. The thing is, Stan is also a polyglot (at the time of writing, listing proficiency in English, Korean, Dutch, German, Spanish, American Sign Language, and French on his resume), and already knew pen shorthand (Gregg) when he started machine shorthand. It took Mirabai a year and half to pass her 225's when studying part-time at a brick-and-mortar steno school. Ted Morin, Plover's current lead Dev, has been practicing stenography for [about 3 years](https://www.facebook.com/morinted/posts/10152184434552401) and is currently around 160 WPM. From my understanding, these people are on the fast end of things. A slightly more pessimistic (though balanced, in my view) take on stenography learning times can be seen [here](http://careyryan.com/stenotype-can-we-type-much-faster/). Also have a look at the [most recent statistics related to the Open Steno Project's Community Survey](http://plover.stenoknight.com/2017/08/responses-to-2017-osp-community-survey.html).

So why am I including this section? Because if you are in a field that requires really fast input, there is nothing better than stenography. Such fields might include:

- Transcriptionists (of any type)
- Fields that require frequent "conversational" communication: emails, chatrooms, IRC, etc. Steno shines in conversational contexts because we can easily talk at 200+ WPM -- there are no mental speed bottlenecks in these contexts, so anything slower than speech will be a speed bottleneck.
- Traditional steno fields like court-reporting, captioning, CART, etc.

For basically everyone else, it's not worth learning stenography from a practical point of view (marginal benefit will never exceed marginal cost). I break here with Mirabai on the idea of writers and programmers learning stenography. Unless the majority of your writing is conversational (as mentioned above) or borders on conversational (such as writing character dialogue in novels), you will never be thinking at 200 WPM since you'll be considering word selection, connotation, tone, grammar, style, flow, etc. I also humbly submit that the idea that programmers think at 200 WPM is preposterous. I am studying computer science full time and am yet to come across someone who could even write pseudocode at anything approaching 200 WPM.

Writers and programmers would of course be able to get their thoughts on screen faster with stenography, theoretically with less disruption to the mental flow of ideas. Here's a good quote from Mirabia's series:

> I'm willing to bet that the act of qwerty typing slows down the thoughts of many people. When I type on a qwerty keyboard, I feel my mind splitting along four consecutive but overlapping tracks: One, the word I want to write. Two, the way it's spelled. I'm a pretty good speller, but English is weird enough that the process is never completely automatic. Three, the series of five to ten finger motions it takes to type it. Four, the error checking mechanism that iterates over the first three and confirms that the correct word choice, orthography, and letter position have appeared onscreen. Usually I'll have already started typing the next word when I spot a spelling or typing error in the previous one, and by the time I've pressed backspace ten times to correct two transposed letters, my train of thought will have gotten all tangled up and I'll have to pause for a second to remember what I was writing. Even when I try to pace myself and type more slowly than usual, I'll make an error like this every few sentences, and my flow of composition will have been interrupted half a dozen times by end of the paragraph. 

I am not aware of any evidence that meets my baseline standard (methodologically-sound, peer-reviewed, double-blind scientific studies conducted by qualified and respected researchers without conflicts of interest and funded by entities without an axe to grind) to either support or refute such speculation. Therefore, I leave judgement up to the reader. I am fairly certain that Mirabai is right to an extent. I just don't think gains here will ever come close to offsetting the time required to learn stenography.

The decision to utilize stenography or ignore it is obviously a personal one. However, the community is super friendly and willing to answer questions. I recommend taking a look at the [Plover Google Group](https://groups.google.com/forum/#!forum/ploversteno) and [Discord Channel](https://discordapp.com/channels/136953735426473984/136953735426473984) to talk to individuals into steno. I have been involved in both communities for a couple years now, and have stuck around even after I stopped actively trying to learn stenography.

### The Difficulty of Retraining Your Fingers

To put it simply, if you are already at 70ish WPM (or some other reasonably fast speed) touch-typing QWERTY, and aren’t facing or likely to face RSI, you probably shouldn't bother switching. Optimized layouts (even the bad ones, so to speak), are very much more efficient than QWERTY, and they drastically reduce the amount of effort it takes to type. But there will be an adjustment period of weeks not days, and recovering your old speed will take time. This goes doubly for those of you already using a better layout like Dvorak, Colemak, or Workman. I promise you that you can do better than any one of those three, but the gains will not be earth-shattering.

If the switch were easy or effortless, QWERTY would have ceased to exist long ago. As it is, however, you will be reduced to single digit WPMs for the first little bit, and your fingers will disobey you — you will have to rewire the neural connections in your brain that correspond to what we call “muscle memory.” If you have any sort of time-sensitive full-time occupation that forces you maintain your QWERTY skills (i.e., you can’t afford to go cold turkey and immerse yourself), it’s even harder because you’ll experience [proactive interference](https://en.wikipedia.org/wiki/Interference_theory#Proactive_interference) from already having QWERTY in muscle memory. That is to say, instead of “unlearning” QWERTY when you learn your other layout (replacing the old muscle memory with new muscle memory), the old muscle memory that you need to keep around will inhibit effective acquisition of the new muscle memory.

Depending on your dedication and consistency in practice, getting back to your previous speed can take anywhere from a few weeks to a few months. Poor discipline and lack of self-control can even push this from “difficult” to “impossible." I would suggest that you not waste your time if you are not willing or able to put in the work necessary to be successful.

### QWERTY’s Ubiquitousness

As mentioned above, holding QWERTY in muscle memory when learning a new layout results in proactive interference. For most people, the flipside, called [retroactive interference](https://en.wikipedia.org/wiki/Interference_theory#Retroactive_interference), also holds true. Learning another layout will typically result in a loss of QWERTY speed because more errors are made — when you are trying to type a letter, your finger “forgets” that you are typing QWERTY, and instead presses the key for the letter on your other layout. While this is a problem for everyone, some people, through practice, have been able to keep high speeds on two different layouts simultaneously (e.g., Dvorak and QWERTY). Learning two layouts that are more similar to each other (like QWERTY and Colemak) is more likely to result in retroactive interference (just how learning Italian if you speak Spanish is more likely to mess with your Spanish than if you learn German), while using different physical keyboards for different character layouts (e.g., using Dvorak on a Kinesis Advantage and QWERTY on normal row-staggered keyboards) can help prevent retroactive interference.

The upshot of all this is that most people don’t continue to type with two different layouts in the long run — in other words, learning an optimized layout generally means you lose your QWERTY proficiency. The “problem” with this, of course, is that the rest of the world is designed for QWERTY and expects you to use it.

Not being able to touch-type QWERTY means your productivity will take a hit whenever you have to type on it for some reason (e.g., working on someone else’s computer or taking the GRE). You will also have to contend with keyoard shortcuts designed for QWERTY (such as Ctrl-Z, CTRL-X, CTRL-C, and Ctrl-V), which usually only prove to be problematic in those programs that don’t let you change them (boo on them). These are unavoidable consequences that you will face because QWERTY has become the expected layout in our society -- if you find them unacceptable, stick with QWERTY.

### The Animosity of Others

Certain people get rather worked up any time someone mentions a layout other than QWERTY. My best guess is that this is because the superior efficiency of people who type on other layouts is a direct challenge to their self-perception as competent, effective workers. It's also possible that their defensiveness is a manifestation of the [sunk cost fallacy](https://en.wikipedia.org/wiki/Sunk_cost#Loss_aversion_and_the_sunk_cost_fallacy): having spent a significant amount of time learning to touch-type QWERTY, they don't want to admit that they picked a bad layout. There is also likely a degree of [choice-supportive bias](https://en.wikipedia.org/wiki/Choice-supportive_bias): similar to how people evangelize the make and model of the new car they bought to help convince themselves it was worth it, people are more likely to evangelize QWERTY after deciding to make it their keyboard layout.

Whatever their motivations, some people will challenge your decision to use a layout other than QWERTY. If you are not the type of person that's cool taking heat for being different or constantly having to explain yourself, you may want to think twice about using a layout other than QWERTY.

(Note: you will encounter a larger group of people that is not actively antogonistic but merely confused as to why you find using another layout necessary or prudent. By and large, people in this group are happy shrugging and letting you do your thing if that's what you want -- but they may still give you weird looks. YMMV)

### Most Speed Considerations Are Layout Agnostic

There is a very real possibility if you switch that the time lost in getting back up to speed would have been better spent honing your mastery of whatever layout you do currently use, because most of the ways you can accelerate your typing don’t depend on your layout. In other words, it would probably be better for you to spend a couple months increasing your QWERTY speed from 70 WPM to 100 WPM than getting up to 70 WPM on another layout.

#### Practice

There is no magic here. Optimizing your layout won’t immediately make you a faster typist, though it certainly has the potential to eventually. The thing that will make you a faster typist is practicing a layout until you breathe it and you dream about it. This is like every single other skill in existence; the more you practice, the better you get. 

I want to here emphasize that not all practice is equal. Practice does not make perfect. Practice makes permanent (or, alternatively, “perfect practice makes perfect”). Because we tend to type a great deal in our day to day lives, there is a danger of just going on autopilot and plateauing. Whether or not you decide to continue on in this process, I can recommend that you pick up typing not as something one merely does, but as something one studies and perfects over time.

Practice the most common digraphs and trigraphs in English (or your native language if not English). Lists can be found [here](http://scottbryce.com/cryptograms/stats.htm), [here](http://www.cse.unt.edu/~mgomathi/teaching/2009/csce5550/Lectures/Cipher-Example%202.pdf), and elsewhere through a simple Google search. If you consciously train yourself to type *sequences* rather than *letters*, your speed will increase at a much faster rate.

To extend this concept even further, you should drill with [this list](http://norvig.com/ngrams/count_1w.txt) or [this list](https://www.wordfrequency.info/free.asp?s=y), which have the most common words in English listed out by frequency. It does you little good to type uncommon or unusual words at a high speed because they compose a small portion of what you type (e.g., typing “zyzzyva” fast does you no good because genuses of weevils don’t come up in normal conversation). Getting very fast at words like “the”, “and”, “that” and so forth, however, will dramatically increase your speed because these words compose a large percentage of everything we type.

### Targeting Weaknesses

If you haven't used [Amphetype](https://code.google.com/archive/p/amphetype/) before, you should try it. It is a program that lets you track what things you type fast and what things you type slow (among other things).

A common mistake many people make when learning skills is treating all practice as equally helpful. This is objectively false. As anyone who has ever learned a musical instrument can tell you, you improve much faster if you practice the hard sections in a piece rather than playing it all the way through a bunch of times. (Even though this is much less fun, you improve more). I call this "targeting weaknesses." If you target your weaknesses, you may improve many times faster than someone who thinks that all practice is basically the same.

(Note: this same principle carries over into knowledge acquisition as well -- study what you don't know, not what you do.)

#### Text Expansion

If you really want to ramp up the speed, you should use text expansion to abbreviate at least the first couple hundred most common words and phrases in English, making, for example, “and” just “n”, “I want to” just “iwt”, and so on. By doing this alone, you can cut down on how many keys you have to physically press down by a huge percentage (at least for prose). You can actually do the same thing for common code constructs (e.g., the basic syntax of a for loop in Python), email signatures, and really anything else you can think of. Since I’m on Windows, I personally use AutoHotkey for this purpose, but there are plenty of options for this sort of thing. If your keyboard supports it, you may be able to do text expansion on the firmware level, making it operating system and device agnostic.

Just like normal typing, you’ll need to practice this intentionally to get results, retraining your hands to type “n” every time your brain thinks “and”. You’ll also want to create a “theory” for your abbreviations, and come up with some patterns to reuse as your list grows (e.g., using consistent letter sequences for phrase enders — “iwt” for “I want to”, “hwt” for “he wants to”, “swt” for “she wants to”, etc.). A working knowledge of a brief-heavy stenographic theory will help you here.

#### Number and Symbol Layers

You can create layers for numbers and/or symbols while still using QWERTY for letters. These additional layers have nothing to do with letter layouts, but will still increase your speed -- especially if you are a programmer or deal with information that includes lots of numbers (such as an accountant).

#### Conclusion

Most speed considerations are layout agnostic. If you are already a sufficiently fast typist with another layout, the time spent regaining your old speed on anoher layout would probably be better spent beefing up your current toolkit and optimizing other parts of your typing. No matter what you do, dedicated *intentional* practice can significantly improve your typing, and you shouldn’t switch without first considering if it is really the most rational decision under your circumstances.

## People Who Should Always Learn An Optimized Layout

If you hunt-and-peck, it's going to take you a while to learn how to touch type anyway, so you may as well do it right the first time. Learning how to touch type is really a very important skill since a) it's faster, b) you can look at other things (like the screen) when you type, and c) you make less mistakes. The good news for you is that you should be able to get up to 20 WPM or so in a weekend, which shouldn't be all that much slower than your normal hunt-and-peck speed (i.e., you won't have quite the same magnitude of productivity loss that touch-typists switching will have).

Additionally, young children or other people who have never learned how to type at all should learn an optimized layout from the get-go rather than QWERTY. If you are a parent reading this, please don't inflict uneccessary inefficiency on your child. It certainly doesn't have to be my layout (Colemak and Dvorak are both more widely available), but at least have them learn something that was actually thought through.

## Prior Studies of Keyboard Layouts

I suggest you go through the following links (and any of the others from [this page](http://mdickens.me/typing/alternative_layouts.html) that catch your eye -- some of the links are dead) before you continue reading my approach, just so you can see what else is out there:

- [CarpalX](http://mkweb.bcgsc.ca/carpalx/)
- [MTGAP](https://mathematicalmulticore.wordpress.com/the-keyboard-layout-project/)
- [Aus der Neo Welt (AdNW)](http://adnw.de/) (and its [Google Group](https://groups.google.com/forum/#!forum/adnw))
- [The Optimal Keyboard Layout Project](http://web.archive.org/web/20041012232707/http://www.pvv.org/~hakonhal/main.cgi/keyboard/optimal/) (web archived)
- [Keyboard Evolve](http://www.michaelcapewell.com/programming/keyboardevolve.htm)
- [Norman](https://normanlayout.info/about.html)
- [Workman](http://workmanlayout.org/)
- [Maltron](http://www.adnw.de/uploads/Main/Malt-Artikel/Malt-Artikel.pdf)

There are no doubt other sites out there that discuss these things. I certainly do not pretend to be the first nor most intelligent person that has ever worked on this problem, and wouldn't want anyone to get that impression. Of the methodology of the sites above, I like AdNW and MTGAP best. I'm planning on writing about all the parameters and a logical weighting scheme at some point. (See the outline below).

## Base Layer

### TODO: command characters

- Placing Space, Shift, Backspace, Enter, Tab, Delete, and Escape
- Discussion of other keys for layers and their placement

### Setting up

The first step to designing a base layer is getting a letter layout. There are many different options that have been created over the years, and several optimizers that have been designed to create them (CarpalX, AdNW, MTGAP). I will be using the statistics from the AdNW C++ optimizer to compare layouts since I believe that it is the most thorough program available at the current time, and it is also highly adjustable.

To be able to run the AdNW optimizer, you’ll need to compile the C++ source. I used [MinGW](http://mingw.org/), which is a Windows port of the GCC (GNU Compiler Collection, for C, C++, ADA, etc.). You’ll need to be a little bit familiar with the command line (e.g., changing directories), but it’s not too bad. I knew virtually nothing about compilers or running commands and figured out how to do it via Google and trial-and-error in like 20 minutes. I’ll try and get around posting a step-by-step guide at some point. (At least for Windows).

Once you have opt.cc compiled into opt.exe, it’s pretty easy to compare layouts according to AdNW’s digram and trigram statistics. However, I’d recommend you read through the English section of the instructions for the optimizer (Anleitung.pdf) anyway to get some of the theoretical background behind how optimization and comparison proceeds.

Before I compared the letter layouts, I changed the character set in standard.cfg to exclude punctuation entirely. I did this to compare *letter* layouts only. The optimizer needs "placeholder" characters, so I gave it characters that shouldn't appear in an English corpus (like ä, ö, ß, etc.). I also changed the individual key effort to match my views on the subject, expressed in the picture below:

<http://www.keyboard-layout-editor.com/##@@_x:3&c=%23ffb2d2&a:7&f:7%3B&=3.5&_x:11.5%3B&=3.5%3B&@_y:-0.75&x:2%3B&=3.5&_x:1&c=%23f396ab%3B&=5&_c=%23e26757%3B&=8&_x:7.5%3B&=8&_c=%23f396ab%3B&=5&_x:1&c=%23ffb2d2%3B&=3.5%3B&@_y:-0.75&c=%23b81b24%3B&=10&_c=%23e26757%3B&=7&_x:15.5%3B&=7&_c=%23b81b24%3B&=10%3B&@_y:-0.5&x:3&c=%23cccccc%3B&=0&_x:11.5%3B&=0%3B&@_y:-0.75&x:2%3B&=0&_x:1%3B&=0&_c=%23f396ab%3B&=4.25&_x:7.5%3B&=4.25&_c=%23cccccc%3B&=0&_x:1%3B&=0%3B&@_y:-0.75&c=%23e26757%3B&=7&_c=%23cccccc%3B&=0.5&_x:15.5%3B&=0.5&_c=%23e26757%3B&=7%3B&@_y:-0.5&x:3&c=%23f396ab%3B&=5&_x:11.5%3B&=5%3B&@_y:-0.75&x:2%3B&=5&_x:1&c=%23ffb2d2%3B&=3.5&_c=%23e26757%3B&=7.5&_x:7.5%3B&=7.5&_c=%23ffb2d2%3B&=3.5&_x:1&c=%23f396ab%3B&=5%3B&@_y:-0.75&c=%23b81b24%3B&=9&_c=%23e26757%3B&=6&_x:15.5%3B&=6&_c=%23b81b24%3B&=9%3B&@_y:-0.25&x:8&c=%23e26757%3B&=7&_x:1.5%3B&=7%3B&@_x:7&c=%23cccccc&h:2%3B&=0&_c=%23ffb2d2&h:2%3B&=2&_x:1.5&h:2%3B&=2&_c=%23cccccc&h:2%3B&=0>

My weighting is based off of the subjective impression I get from typing, as well as some common sense. For example:

- Given the fact that rows on keyboards are relatively straight (to allow for a relatively relaxed hand position and avoidance of stretching for top and bottom row keys) -- even for keyboards like the Kinesis Advantage that I type on -- the bottom row is easier to type for the shorter fingers (index, and pinky) while the top row is easier to type for the longer fingers (middle and ring). In what experimentation I've done, staggering the columns to exactly match a neutral hand position is actually a poor choice because it creates much larger inter-finger distances for keys on different rows, particularly if one key is on the top "row" while the other key is on the bottom "row." In other words, while the marginal benefit of a slighlty more ergonomic neutral position is small to moderate, the marginal cost of complicating digrams and trigrams on the same hand is much larger. The amount of column stagger on the Kinesis Advantage seems quite good to me -- it makes normal typing slightly more comfortable than on straight ortholinear keyboards, but does not interfere with same-hand digrams and trigrams very much. The differential key heights (e.g., the middle finger column is lower down than the ring finger column) on concave keyboards like this are a more effective way to deal with the different lengths of our fingers, in my opinion, since differential key heights don't mess with inter-row sequences nearly as much (at least from what limited testing I've done).
- Finger flexion and extension is inherently easier physiologically than lateral movement (think clenching and unclenching a fist vs. splaying your fingers to high five someone). However, in the clase of the index and pinky fingers (the ones with possible lateral movement), I personally find pure lateral movement easier than extension (i.e., top row index and pinky keys). Your comfort level will probably depend on how stubby you pinky and index fingers are in comparison to your other fingers.
- Keys that require lateral movement also disrupt the overall hand position more than flexion and extension. In other words, it is easier to flex and extend a finger independent from other fingers than it is is to move it laterally... *so long as your fingers are long enough to make the flexion/extension*. Lateral index movement should be penalized over bottom row flexion, and lateral pinky movement should be penalized to a proportionally greater extent since the pinky is less independent from other fingers (particularly the ring finger) in its movement.
- Lateral movement combined with flexion/extension is harder than either type of movement alone, and the overall travel distance is greater. (You can prove this geometrically by assuming square keycaps and calculating the difference between a side length and the diagonal of the square). These keys should be punished more heavily than lateral keys alone. (Especially for the pinky).
- It is easier to move the thumb separately from the other fingers -- hence the lower weight on the big thumb key that requires movement. The third thumb key on either side -- used in my layout as the key to enter Normal mode for Vim -- moves the whole hand upwards some, in much the same way that top-row pinky keys do. Thumb keys after the first should require movement *outward* not *inward* -- having a tucked in thumb makes typing much more difficult, but outward thumb movement (assuming it is not too substantial) is quite comfortable.

I'm wary of putting down any hard and fast rules without some rigorous scientific studies on the ergonomics/effortfulness of typing (HINT HINT academics). I think the logic I have put forward makes sense (and is line with my own personal experience), but other people may disagree. Feel free to read contrary views and run the optimization with a different weighting. (This ability to change optimization parameters is one of the reasons I favor AdNW as a program).

Finally, I also tweaked AdNW's penalities regarding adjacent fingers. In the stock configuration, thumb-index "adjacency" is not penalized at all, index-middle adjacency is slightly penalized, middle-ring adjacency is slightly more penalized, and ring-pinky adjacency is heavily penalized. I agree with everything except the penalty regarding index-middle adjacency -- in my opinion, there should not be a penalty on this adjacency. I find that I do not have problems with these two fingers being adjacent at all -- unlike the other combinations which I find somewhat harder to type without errors (particularly ring-pinky). It's worth pointing out that some layouts like Colemak favor adjacency rather than penalizing it -- the logic being that it is easier to type two keys in one fluid motion on one hand than one key on either hand. The thing is, you can do this without the fingers being right next to each other. Fingers next to each are "more connected" (to use an extremely unscientific phrase), and therefore more likely to interfere with each other's movements. Thus, in my opinion, it is best to optimize for so-called "rolls" that are not adjacent (excepting index-middle). Michael (the creator of MTGAP) has [an interesting page up](https://mathematicalmulticore.wordpress.com/2010/01/09/should-a-keyboard-layout-optimize-for-hand-alternation-or-for-rolls/) regarding this idea, and I highly recommend you read it.

Here is a link to the config file I used during the optimization below. As discussed above, it has been modified from the original with respect to character set, individual key effort, and adjacency penalties.

### Letter Layout Comparison

After typing in most of the optimized layouts I could find and formatting them the way that AdNW wants (with punctuation replaced with foreign characters to avoid punctution differences interfering), I arrived at the following list:

```

kuäöüvgcljfhieaodtrnsëxyïßqbpwmz	AdNW
qläpöüfudkëarenbgsitoïzwßhjvcymx	Arensito
qwfgjypuläöasetdhniorüzxcvbkmëïß	Asset
buäöüpclmfxhieaodtrnsëkyïßqjgwvz	Buteck
äywdfjpluqöaersgbtnioüxzcvëkmhïß	Capewell
qwfpgjluyäöarstdhneioüzxcvbkmëïß	Colemak
äöüpyfgcrlëaoeuidhtnsïßqjkxbmwvz	Dvorak
byouäkdclpqhieaömtsrnvxüëïßwgfjz	HIEAMSTRN
käuypwlmfcöoaeidrnthsüqëïßzxvgbj	Klausler
ypoujkdlcwäineaömhtsrüqzëïßbfgvx	MTGAP
xvlcwkhgfqäuiaeosnrtdyöüëpzbmïßj	Neo2
qwdfkjurläöasetgyniohüzxcvbpmëïß	Norman
qgmlwbyuväödstnriaeohüzxcfjkpëïß	QGMLWB
qwertyuiopäasdfghjklöüzxcvbnmëïß	QWERTY
qdrwbjfupäöashtgyneoiüzxmcvklëïß	Workman

```

You could certainly find other layouts to compare if you like, but I think that this is representative of most (all?) of the layouts with any sort of real following, as well as most of the varying design philosophies. Here is the command I used to run the comparison (with a redirection operator to save the results in a text file):

```

opt -2 englisch.txt -3 englisch.txt -r bsptast.txt > layout_comparison.txt

```

And here are the results (stored in layout\_comparison.txt):

```

AdNW             285.318 total effort   214.073 positional effort    left right
                   0.937 same finger rp  16.792 shift same finger top  3.4 12.3
  kuäöü vgcljf    71.408 hand alternat.  22.772 shift hand alter. mid 39.3 32.4
  hieao dtrnsë     2.018 inward/outward  24.998 inward or outward bot  3.9  8.8
  xyïßq bpwmz      7.982 adjacent        19.508 shift adjacent    sum 46.6 53.4
                   4.191 no hand altern. 44.391 two hand altern.
                   3.043 seesaw           6.840 indir same finger
                  7.8 11.5 12.0 15.3 --.- --.- 19.1 10.9 13.5  9.9 Sh  1.9  0.9


Arensito         289.946 total effort   184.312 positional effort    left right
                   1.030 same finger rp  11.674 shift same finger top  6.1  9.4
  qläpö üfudkë    51.085 hand alternat.  46.686 shift hand alter. mid 34.5 31.8
  arenb gsitoï     0.871 inward/outward  45.227 inward or outward bot  8.6  9.6
  zwßhj vcymx     29.559 adjacent         7.596 shift adjacent    sum 49.2 50.8
                  21.101 no hand altern. 23.628 two hand altern.
                  12.160 seesaw           3.118 indir same finger
                  9.9 11.8 12.0 15.5 --.- --.- 14.8 11.5 15.2  9.3 Sh  1.7  1.2


Asset            322.384 total effort   193.371 positional effort    left right
                   3.375 same finger rp   8.959 shift same finger top  6.1 10.3
  qwfgj ypuläö    55.604 hand alternat.  41.362 shift hand alter. mid 39.3 32.3
  asetd hniorü     1.102 inward/outward  38.363 inward or outward bot  7.0  4.9
  zxcvb kmëïß     22.402 adjacent        10.968 shift adjacent    sum 52.4 47.6
                  20.790 no hand altern. 28.814 two hand altern.
                  11.069 seesaw           4.259 indir same finger
                  9.4  8.6 17.2 17.3 --.- --.- 18.8  9.8 11.2  7.8 Sh  1.2  1.7


Buteck           285.804 total effort   211.078 positional effort    left right
                   1.154 same finger rp  17.098 shift same finger top  4.1 13.9
  buäöü pclmfx    70.153 hand alternat.  26.616 shift hand alter. mid 39.3 32.4
  hieao dtrnsë     2.155 inward/outward  26.035 inward or outward bot  4.3  6.0
  kyïßq jgwvz      8.492 adjacent        15.637 shift adjacent    sum 47.7 52.3
                   4.872 no hand altern. 43.351 two hand altern.
                   3.441 seesaw           6.133 indir same finger
                  8.9 11.5 12.0 15.3 --.- --.- 19.9 11.8 10.4 10.1 Sh  1.8  1.1


Capewell         304.060 total effort   196.468 positional effort    left right
                   1.805 same finger rp  14.905 shift same finger top  9.5  8.9
  äywdf jpluqö    49.049 hand alternat.  52.016 shift hand alter. mid 34.7 31.6
  aersg btnioü     0.965 inward/outward  46.488 inward or outward bot  5.9  9.4
  xzcvë kmhïß     22.046 adjacent        13.096 shift adjacent    sum 50.1 49.9
                  25.517 no hand altern. 22.938 two hand altern.
                  15.852 seesaw           3.317 indir same finger
                  9.8 13.7 10.9 15.6 --.- --.- 15.7 15.9  9.8  8.6 Sh  1.6  1.3


Colemak          285.444 total effort   198.289 positional effort    left right
                   1.062 same finger rp  14.014 shift same finger top  8.0  8.4
  qwfpg jluyäö    58.159 hand alternat.  40.005 shift hand alter. mid 33.5 38.2
  arstd hneioü     1.067 inward/outward  38.121 inward or outward bot  6.9  5.0
  zxcvb kmëïß     17.319 adjacent         7.520 shift adjacent    sum 48.4 51.6
                  16.546 no hand altern. 30.433 two hand altern.
                  10.460 seesaw           5.302 indir same finger
                  9.3  8.0 11.9 19.1 --.- --.- 19.2 14.6  8.9  9.0 Sh  1.1  1.8


Dvorak           330.315 total effort   236.533 positional effort    left right
                   2.547 same finger rp  12.731 shift same finger top  3.7 17.3
  äöüpy fgcrlë    70.497 hand alternat.  34.173 shift hand alter. mid 37.0 31.2
  aoeui dhtnsï     1.708 inward/outward  24.298 inward or outward bot  3.1  7.8
  ßqjkx bmwvz     10.990 adjacent        20.175 shift adjacent    sum 43.8 56.2
                   5.394 no hand altern. 44.995 two hand altern.
                   2.901 seesaw           5.605 indir same finger
                  9.9  7.3 12.1 14.4 --.- --.- 16.9 13.7 14.0 11.7 Sh  1.9  1.0


HIEAMSTRN        287.727 total effort   207.916 positional effort    left right
                   1.007 same finger rp  20.633 shift same finger top 13.0 13.8
  byouä kdclpq    70.325 hand alternat.  25.717 shift hand alter. mid 32.1 32.0
  hieaö mtsrnv     3.236 inward/outward  26.010 inward or outward bot  2.0  7.1
  xüëïß wgfjz     10.414 adjacent         9.397 shift adjacent    sum 47.1 52.9
                   4.274 no hand altern. 43.447 two hand altern.
                   2.590 seesaw           6.623 indir same finger
                  8.4  8.9 19.2 10.7 --.- --.- 19.6 11.9 10.2 11.2 Sh  1.8  1.0


Klausler         320.539 total effort   216.033 positional effort    left right
                   2.525 same finger rp  13.760 shift same finger top  7.1 13.5
  käuyp wlmfcö    68.869 hand alternat.  34.978 shift hand alter. mid 38.3 33.4
  oaeid rnthsü     0.713 inward/outward  25.948 inward or outward bot  2.0  5.8
  qëïßz xvgbj     14.409 adjacent        12.525 shift adjacent    sum 47.3 52.7
                   7.271 no hand altern. 43.742 two hand altern.
                   3.397 seesaw           7.186 indir same finger
                  9.9  8.0 14.6 14.8 --.- --.- 19.9 13.3  8.5 10.9 Sh  1.8  1.0


MTGAP            288.626 total effort   204.923 positional effort    left right
                   1.173 same finger rp   8.707 shift same finger top 13.7 13.4
  ypouj kdlcwä    65.928 hand alternat.  41.043 shift hand alter. mid 34.1 29.0
  ineaö mhtsrü     1.555 inward/outward  30.241 inward or outward bot  2.0  7.7
  qzëïß bfgvx     18.755 adjacent         2.351 shift adjacent    sum 49.8 50.2
                   8.156 no hand altern. 39.345 two hand altern.
                   4.835 seesaw           5.307 indir same finger
                 10.8  9.1 19.2 10.8 --.- --.- 15.7 14.7 10.7  9.0 Sh  1.8  1.0


Neo2             463.868 total effort   228.161 positional effort    left right
                   8.492 same finger rp   6.291 shift same finger top 10.0  9.8
  xvlcw khgfqä    61.220 hand alternat.  40.347 shift hand alter. mid 37.0 34.1
  uiaeo snrtdy     0.893 inward/outward  27.631 inward or outward bot  3.7  5.4
  öüëpz bmïßj     11.842 adjacent         7.811 shift adjacent    sum 50.7 49.3
                  13.278 no hand altern. 33.355 two hand altern.
                   5.483 seesaw           8.141 indir same finger
                  4.4  8.2 12.0 26.1 --.- --.- 23.2  8.0 10.9  7.1 Sh  1.6  1.2


Norman           373.047 total effort   195.152 positional effort    left right
                   6.572 same finger rp  19.395 shift same finger top  8.6 12.9
  qwdfk jurläö    55.407 hand alternat.  41.026 shift hand alter. mid 37.4 27.9
  asetg yniohü     1.251 inward/outward  35.363 inward or outward bot  7.0  6.2
  zxcvb pmëïß     20.414 adjacent        10.699 shift adjacent    sum 53.0 47.0
                  20.886 no hand altern. 28.566 two hand altern.
                   9.966 seesaw           3.713 indir same finger
                  9.4  8.6 18.9 16.1 --.- --.- 16.0 13.3 11.2  6.6 Sh  1.2  1.7


QGMLWB           369.121 total effort   213.823 positional effort    left right
                   4.929 same finger rp  13.822 shift same finger top 10.3  6.8
  qgmlw byuväö    67.399 hand alternat.  30.030 shift hand alter. mid 32.4 39.3
  dstnr iaeohü     1.122 inward/outward  25.015 inward or outward bot  6.9  4.4
  zxcfj kpëïß     12.231 adjacent        12.714 shift adjacent    sum 49.6 50.4
                   7.430 no hand altern. 39.779 two hand altern.
                   3.488 seesaw           9.555 indir same finger
                  5.3  8.8 14.4 21.1 --.- --.- 21.1 14.6  8.2  6.5 Sh  1.2  1.6


QWERTY           611.112 total effort   403.527 positional effort    left right
                   6.915 same finger rp   6.141 shift same finger top 28.7 20.7
  qwert yuiopä    52.271 hand alternat.  41.580 shift hand alter. mid 22.6  9.8
  asdfg hjklöü     1.110 inward/outward  38.156 inward or outward bot  7.0 11.2
  zxcvb nmëïß     21.751 adjacent        10.982 shift adjacent    sum 58.3 41.7
                  25.670 no hand altern. 27.131 two hand altern.
                  13.273 seesaw           5.679 indir same finger
                  9.4  8.6 18.9 21.4 --.- --.- 18.8  7.9 11.2  3.7 Sh  1.1  1.7


Workman          303.174 total effort   190.144 positional effort    left right
                   2.836 same finger rp   8.410 shift same finger top 13.3  6.9
  qdrwb jfupäö    55.678 hand alternat.  51.527 shift hand alter. mid 30.3 35.0
  ashtg yneoiü     1.132 inward/outward  38.829 inward or outward bot  7.8  6.6
  zxmcv klëïß     18.289 adjacent        10.937 shift adjacent    sum 51.5 48.5
                  18.203 no hand altern. 29.992 two hand altern.
                   9.903 seesaw           5.456 indir same finger
                  9.2 10.7 13.5 18.1 --.- --.- 15.6 14.6  9.2  9.1 Sh  1.0  1.9

```

As you can see, somewhat unsurprisingly, AdNW and Buteck (the layouts created with this optimizer) did very well. Colemak and HIEAMSTRN (which I shall henceforth call HIEAM because it's shorter) also did quite well.

Rather than fiddling around with the weighting of parameters in the config file (which would change how parameters are combined, and therefore the total score for each layout), I find it easier to just compare the layouts on the various parameters by looking at them. By doing this, it is possible to see that HIEAM is comparable to the layouts with the lowest same-finger (AdNW and Colemak, for example), destroys all the other layouts on inward/outward ratio, is comparable to the layouts with the highest hand alternation (AdNW and Dvorak, for example), has a low score for see-saw, and has a relatively high percentage of inward and outward motions ("rolls") compared to many of the other latouts with low-same finger and high-alternation. When I get the time I'll get around to explaining why all this makes HIEAM the best choice, but for now, you can think of it as the best because it excels across all the factors generally thought to be relevant rather than being the best in only one or two areas.

### Filling In Punctuation

To determine what your punctuation character set should be, you’ll need to determine what punctuation you type most frequently (which will depend upon your use case). I did this with a short Python script and a text corpus from exactly the sort of thing that will compose the majority of my non-code typing in the future: exegetical Bible studies. I downloaded all the major studies from [Ichthys.com](http://ichthys.com), the main Bible study site I follow, [in RTF form](http://ichthys.com/zip-msword.ZIP). I then converted them into plain text files, and counted character frequencies. (The Greek and Hebrew scripts were not converting well for some reason, so I just straight converted without bothering with Unicode — all the Greek and Hebrew words got replaced with question marks, which means that the character frequency of ? is somewhat higher than it should be).

[Here’s the Python script](https://steventammen.com/assets/files/keyboard-layouts/LetterFreq.py) I used to do this:

```
#-------------------------------------------------------------------------------
# Name:            LetterFreq.py
#
# Author:          Steven Tammen
#
# Email:           steven@steventammen.com
#
# Created:         01/08/2016
#
# Copyright:       No
#-------------------------------------------------------------------------------

from csv import *

#specifies names of plain text files to make a corpus
#for the frequency analysis. I was lazy and used relative
#references, but if you specify the paths unambiguously there
#is no reason why this script needs to be in the same
#directory as the files.
fileNames = (
    "1Theo.txt",
    "2A-Angelo.txt",
    "3A-Anthro.txt",
    "3B-Hamartio.txt",
    "4A-Christo.txt",
    "4B-Soterio.txt",
    "5-Pneumato.txt",
    "E1.txt",
    "E2.txt",
    "E3.txt",
    "E4.txt",
    "E5.txt",
    "E6.txt",
    "E7.txt",
    "Exodus-intro.txt",
    "Genesis-Questions.txt",
    "ICHTHYS-Acronym.txt",
    "intro.txt",
    "matthew-questions.txt",
    "Pet00.txt",
    "Pet01.txt",
    "Pet02.txt",
    "Pet03.txt",
    "Pet04.txt",
    "Pet05.txt",
    "Pet06.txt",
    "Pet07.txt",
    "Pet08.txt",
    "Pet09.txt",
    "Pet10.txt",
    "Pet11.txt",
    "Pet12.txt",
    "Pet13.txt",
    "Pet14.txt",
    "Pet15.txt",
    "Pet16.txt",
    "Pet17.txt",
    "Pet18.txt",
    "Pet19.txt",
    "Pet20.txt",
    "Pet21.txt",
    "Pet22.txt",
    "Pet23.txt",
    "Pet24.txt",
    "Pet25.txt",
    "Pet26.txt",
    "Pet27.txt",
    "Pet28.txt",
    "Pet29.txt",
    "Pet30.txt",
    "Pet31.txt",
    "readbible.txt",
    "Salvation.txt",
    "SR1.txt",
    "SR2.txt",
    "SR3.txt",
    "SR4.txt",
    "SR5.txt",
    "Tribulation-Part1.txt",
    "Tribulation-Part2A.txt",
    "Tribulation-Part2B.txt",
    "Tribulation-Part3A.txt",
    "Tribulation-Part3B.txt",
    "Tribulation-Part4.txt",
    "Tribulation-Part5.txt",
    "Tribulation-Part6.txt",
    "Tribulation-Part7.txt", )


#creates a dictionary (Python's version of a hash table) and
#populates it with characters and their frequencies in the corpus.
#We can get away using nested for loops here (O(n^2)) since this
#corpus is only a few hundred thousand lines. You could do it a
#more efficient way but it is less intuitive.
charDict={}
for name in fileNames:
    f = open(name, 'r')
    st = f.readline()
    while len(st) != 0:
        st = st.strip('\n')
        for i in range(len(st)):
            if (st[i]).isalpha():
                char = (st[i]).lower()
            elif st[i]=="-" and (st[i-1]).isdigit():
                char="v-"
            elif st[i]==":" and (st[i-1]).isdigit():
                char="v:"
            elif st[i]==";" and (st[i-1]).isdigit():
                char="v;"
            else:
                char=st[i]
            if char in charDict:
                charDict[char] += 1
            else:
                charDict[char] = 1
        st = f.readline()
    f.close()


#sorts the keys in order of descending frequency for each category of
#interest: letters, numbers, and punctuation/other. Spaces, tabs, carriage
#returns, etc. are ignored purposefully since they are not relevant to our
#analysis.
letters = []
numbers = []
others = []
keys = charDict.keys()
for key in keys:
    if key.isalpha():
        letters.append(key)
    elif key.isdigit():
        numbers.append(key)
    elif key.isspace():
        continue
    else:
        others.append(key)
            
letterPairs=((key, charDict[key]) for key in letters)
letterPairs=sorted(letterPairs, key = lambda x: x[1], reverse = True)

numberPairs=((key, charDict[key]) for key in numbers)
numberPairs=sorted(numberPairs, key = lambda x: x[1], reverse = True)

otherPairs=((key, charDict[key]) for key in others)
otherPairs=sorted(otherPairs, key = lambda x: x[1], reverse = True)


#prints the frequencies to a csv file for further analysis in Excel
#(or an equivalent spreadsheet program). Some cleaning up is necessary
#to incorporate characters like em dashes and smart quotes in the
#frequencies of more typical characters (hyphens and quotes, etc.).
f=open("LetterFreq.csv",'w', newline='')
csvWriter=writer(f)
for letterPair in letterPairs:
    csvWriter.writerow(letterPair)
csvWriter.writerow([])
for numberPair in numberPairs:
    csvWriter.writerow(numberPair)
csvWriter.writerow([])
for otherPair in otherPairs:
    csvWriter.writerow(otherPair)
f.close()

```

And [here is what it outputs](https://steventammen.com/assets/files/keyboard-layouts/LetterFreq.csv) given my corpus (your text editor will have to support Unicode to see everything properly):

```

e,803528
t,598843
o,495798
i,492051
a,464314
s,434196
n,433896
r,395252
h,380846
l,277050
d,230886
u,175152
c,173898
f,168673
m,139501
w,124651
p,124395
g,123719
y,102014
b,98846
v,82177
k,30190
j,19117
x,8767
z,4264
q,4086
é,32
ŕ,17
ü,6
á,2
ř,1
ö,1
í,1
č,1

1,44448
2,27492
3,15772
4,12982
5,9927
6,8950
0,7933
7,7484
8,7304
9,7117

",",81519
.,79721
v:,32737
),30797
(,29007
"""",25318
v;,14123
',12307
v-,10621
:,8614
],7951
[,7947
-,5668
?,5045
;,3151
“,2781
”,2759
–,2660
!,1033
*,773
’,773
/,624
#,399
‘,138
&,137
=,87
—,53
_,52
`,42
%,19
<,17
>,16
+,12
…,10
•,10
{,2
},2
|,1
·,1

```

Due to the nature of the particular corpus I chose (which has a lot of references to Bible verses), I chose to separate out the semicolons, dashes, and colons associated with Bible verse references (demarcated above as v; v- and v:, respectively), since they will be handled separately with the numbers.

For the base layer, we are only interested in the top 6 punctuation characters. While some of the numbers have a higher frequency (at least in this corpus) than the punctuation characters, there are good reasons for keeping the numbers together, which will be discussed below. If you combine the opening and closing smartquotes with the total for normal quotes, the six most frequent non-letter and non-number characters, in order of descending frequency, are:

1. comma
2. period
3. double quotes
4. close parenthesis
5. open parenthesis
6. apostrophe

After these six come the colon, square brackets, and so forth. These will appear on a different layer. The frequency differences are large enough that they are not likely to be due to statistical artifact. This order is markedly different from what the author of the MTGAP algorithm has come up with for prose ([see here](http://mtgap.bilfo.com/theory-of-letter-frequency.html)). He no doubt used a much larger overall corpus to generate his order, but due to to the similarity of my writing style to the author of the present corpus (for example, a tendency towards favoring complex multi-clause sentences over simple sentences, using lots of parenthetical clauses for explanatory purposes, enclosing new terms, words/phrases being discussed, and neologisms in double quotes, etc.), I feel confident in saying that the above order is a closer match to my particular writing style. If you want this exercise to be accurate *for you*, you will have to analyze your own writing and try to find a corpus that matches it well. Using pre-generated orders like those linked to works well if your writing is very normal -- I write more formally in "casual" discourse than almost everyone else I have met, and use much more complicated language and sentence structure than most people, so a "one size fits most" approach is a poor match *for me specifically*. As the saying goes, YMMV.

After determining these 6 characters, I created 720 layouts to compare all the possible arrangements of them on the six keys available (six factorial, a permutation). I changed the character set in the config file to include the punctuaton (rather than the foreign characters used above), changed the layouts being compared, and once again used a command to store the output in a file:

```

opt -2 englisch.txt -3 englisch.txt -r bsptast.txt >hieam_punc.txt

```

At some point I'll get around to posting the spreadsheet where I sorted the all layouts, but for now, be content with just the 4 best:

```
HIEAM64          295.407 total effort   215.118 positional effort    left right
                   1.114 same finger rp  19.943 shift same finger top 12.9 13.4
  byou' kdclpq    70.243 hand alternat.  26.526 shift hand alter. mid 32.3 31.0
  hiea, mtsrnv     3.241 inward/outward  26.090 inward or outward bot  3.5  6.9
  x").( wgfjz     10.573 adjacent         9.099 shift adjacent    sum 48.7 51.3
                   4.421 no hand altern. 43.359 two hand altern.
                   2.661 seesaw           6.708 indir same finger
                  8.2  8.9 18.6 13.0 --.- --.- 19.0 11.5  9.9 10.8 Sh  1.8  1.0
                  
HIEAM290         295.415 total effort   214.975 positional effort    left right
                   1.114 same finger rp  19.943 shift same finger top 12.6 13.4
  byou( kdclpq    70.243 hand alternat.  26.526 shift hand alter. mid 32.3 31.0
  hiea, mtsrnv     3.241 inward/outward  26.090 inward or outward bot  3.7  6.9
  x").' wgfjz     10.572 adjacent         9.099 shift adjacent    sum 48.7 51.3
                   4.421 no hand altern. 43.359 two hand altern.
                   2.661 seesaw           6.708 indir same finger
                  8.2  8.9 18.6 13.0 --.- --.- 19.0 11.5  9.9 10.8 Sh  1.8  1.0
                  
HIEAM18          295.463 total effort   215.122 positional effort    left right
                   1.114 same finger rp  19.943 shift same finger top 12.9 13.4
  byou' kdclpq    70.243 hand alternat.  26.526 shift hand alter. mid 32.3 31.0
  hiea. mtsrnv     3.241 inward/outward  26.090 inward or outward bot  3.5  6.9
  x"),( wgfjz     10.573 adjacent         9.099 shift adjacent    sum 48.7 51.3
                   4.421 no hand altern. 43.359 two hand altern.
                   2.661 seesaw           6.708 indir same finger
                  8.2  8.9 18.6 13.0 --.- --.- 19.0 11.5  9.9 10.8 Sh  1.8  1.0

HIEAM270         295.500 total effort   214.979 positional effort    left right
                   1.114 same finger rp  19.943 shift same finger top 12.6 13.4
  byou( kdclpq    70.243 hand alternat.  26.526 shift hand alter. mid 32.3 31.0
  hiea. mtsrnv     3.241 inward/outward  26.090 inward or outward bot  3.7  6.9
  x"),' wgfjz     10.572 adjacent         9.099 shift adjacent    sum 48.7 51.3
                   4.421 no hand altern. 43.359 two hand altern.
                   2.661 seesaw           6.708 indir same finger
                  8.2  8.9 18.6 13.0 --.- --.- 19.0 11.5  9.9 10.8 Sh  1.8  1.0
```

While these 4 are about the same, they get noticeably worse from here (more same-finger, etc.). Since the ones with both parentheses on the bottom are better, the decision on which layout to use will mostly come down to how much you use commas compared to how much you use periods (a matter of frequency). Commas and periods are both common in coding, and used about equally as frequently (according to the [MTGAP orders](http://mtgap.bilfo.com/theory-of-letter-frequency.html) -- it really depends what language you are using, since Java uses periods more and C uses commas more, for example). People who use more complex sentence structure will tend to use commas more, while those who use simpler sentence structure will tend to use periods more. However, people that use a variety of punctuation (including semicolons, parentheses, em dashes, and colons) in addition to commas will probably end up using periods more even if they use complex sentence structure. (I fall into this last category -- I use complex sentence structure, but use enough alternate punctuation that the consistency of having a period every sentence overpowers the cases where a sentence has lots of commas).

People who do a lot of numerical data entry will want the period in a more favorable position. If you use either character in hotstrings, this will also have an effect. As will be discussed below, I use the period in place of the semicolon when entering Bible verse references via hotstring, so *for me*, it makes a lot more sense to have the period in the favorable position -- all the v; usage will fall under the period, meaning that "period use" (i.e. use of the key in total rather than the character) will far outweigh "comma use." 

If you hadn't picked up on it yet, these things vary by individual, so what works best for me may not work best for you. Part of the reason why I'm going through all the effort of explaining how I went about my own layout design is to show how it can be done on an individual basis.

# TODO

- Add pictures and files above, proofread, polish
- Transfer in progress thoughts (diacritics, use of emphasis, etc.) onto this page
- Work on below

## Outline of Optimization

### Introduction and Explanation of Methodology

I have, in some form or another, been working on optimizing my keyboard layout for a couple years now. This is not to say I've spent a great deal of total time on it, or that you should automatically listen to me. There are plenty people much smarter than I who have worked on the problem and come up with different solutions. But I hope by documenting the process it might be made less mysterious overall, especially for people who haven't ever compiled C++ code from a shell instance and think that a genetic algorithm is something related to DNA.

In this section I will first go over each of the relevant factors in optimization, then discuss how we ought to go about weighting them (which is really the tricky part). Finally, I will go over some of the preliminary design considerations that must be taken into account when designing a layout.

- Optimization Considerations
   - Differences in Hand Morphology
      - My Hand Morphology
   - Differences in Optimization Goals (speed vs ergonomics)
      - My Optimization Goals (balance)
   - Differences in Textual Corpus
      - My Textual Corpus (Latin, Greek, Hebrew, German, French, Italian, Spanish, Markdown, Org, LaTeX, programming, number entry)
   - The Unavoidability of Opportunity Cost: Coming to an “Optimal Compromise”
   - The Danger of Perfectionism
- Character Layout Design Factors
   - Finger Travel Distance
   - Same Finger
   - Indirect Same Finger
   - Shift Same Finger
   - Hand Alternation
   - Two Hand Alternation
   - Inward Motion Frequency
   - Outward Motion Frequency
   - Inward/Outward Motion Ratio
   - Inward Roll Frequency
   - Outward Roll Frequency
   - Inward/Outward Roll Ratio
   - Roll Conformity to Standards Based Upon Hand Physiology and Subjective Analysis
   - Vertical Hand Shift (“Row Jumping”)
   - Number of Movements Between Rows
   - Horizontal Hand Shift (“Column Jumping”)
   - Number of Movements Between Columns
   - Finger Load Conformity to Standards Based on Hand Physiology and Subjective Analysis
   - Hand Balance
   - Adjacency
   - Shift Adjacency
   - Home Position %
   - Favorable Position %
   - Index Extension %
   - Pinky Extension %
- Weighting of Character Layout Design Variables
   - Comparison Methods
      - Layouts: Numerical Scores Based on Percentage-Based Weighting of Variables
      - Individual Factors: Percent Difference Between Layouts
      - Individual Factors: Normalization by Best Performing Layout
   - General Approaches: Specialization vs. Jack of All Trades
      - Imperfect Knowledge of Variable Importance in General
      - Imperfect Knowledge of Variable Importance with Respect to Individual Differences
- Preliminary Design Considerations
   - Additional Keys vs. Layers
   - The Most Efficient Methods of Accessing Layers: Leader Keys vs. Modifier Keys
   - The Most Efficient Keys to Access Layers: Thumb Keys vs. Finger Keys
   - Key Priority for a simple 40-Key Layout
   - Key Priority for a Multilayer 40-Key Layout
   - Subjective Key Weighting for a simple 40-Key Layout
   - Subjective Key Weighting for a Multilayer 40-Key Layout
   - Dual Use: Modifiers on the Home Row
   - Key Scope: Usage Context Driving Availability
      - Importance
      - The Accessibility of Control Keys Across Layers
      - The Accessibility of Modifier Keys Across Layers
      - Space
      - Esc
   - Key Clustering Patterns
      - Importance
      - Numbers
      - Navigation/Editing
      - Mousing
   - Grouping and Consistency: Why Computer Optimized Layouts May Not Always Be Superior
      - A Brief Discussion of Human Cognition
      - “Chunking”
      - Key Frequency Considerations
- Base Layer
   - Reasons for Including All the Letters on the Base Layer
   - Reasons for Keeping E off of the Thumbs
   - A Comparison of Letter Layers
      - HIEAM as Superior Choice
   - Determining Which Punctuation Keys Should Go on the Base Layer
   - Determining How to Lay Out the Punctuation Keys on the Base Layer
   - Placement of the Space Key
   - Placement and Usage of the Shift Key
   - Using , for Entering Navigation/Editing Mode
      - {,} Alone Toggles on Navigation/Editing Mode
      - {,}{Spc} Acts as Normal
      - {, down}{Spc}{, up} Enters Vim Normal Mode With Spacemacs Leader Key Toggled
   - Using ) for Entering Commands
      - {)} Alone Focuses Command Box
      - Command structure: {)}{letters/numbers}{Spc/Enter/Tab etc.}
      - {)}{Spc} Acts as Normal
   - Using . for Entering Greek/Hebrew/etc. Mode
      - Either Greek or Hebrew is active mode: switch with ) commands
      - {.} Alone Toggles on Greek/Hebrew Mode (Whichever is active)
      - {.}{Spc} Acts as Normal
      - Hbr and grk hotstrings (hbr —> “Hebrew: ”) activate respective mode: used when listing what a word is in both languages regardless of current active mode on . key
- TODO Explain Nav Layer
- TODO Explain Greek Layer
- TODO Explain Shift Layers
- TODO Explain Number Layers
- TODO Explain Code Layer
- TODO Explain Symbol Layer
- TODO Explain Function Layer
- TODO Explain Media Layer
- Caveats
   - Character frequencies based on typing out all words; do not take into account text expansion/briefs
   - Writing Corpuses Change Over Time
   - Individual Physiological Factors Change Over Time (e.g., Arthritis)

## Punctuation results from ADNW Optimizer Evaluation

```

HIEAM            278.108 total effort   189.249 positional effort    left right
                   1.118 same finger rp  19.943 shift same finger top 12.9 13.4
  byou' kdclpq    70.243 hand alternat.  26.526 shift hand alter. mid 32.3 31.0
  hiea. mtsrnv     3.240 inward/outward  26.086 inward or outward bot  3.5  6.9
  x)",( wgfjz     10.621 adjacent         9.099 shift adjacent    sum 48.7 51.3
       ┬á           4.421 no hand altern. 43.359 two hand altern.
                   2.661 seesaw           6.645 indir same finger
                  8.2  8.6 18.9 13.0 --.- --.- 19.0 11.5  9.9 10.8 Sh  1.8  1.0


CommaMid         278.146 total effort   189.254 positional effort    left right
                   1.118 same finger rp  19.943 shift same finger top 12.9 13.4
  byou' kdclpq    70.243 hand alternat.  26.526 shift hand alter. mid 32.3 31.0
  hiea, mtsrnv     3.240 inward/outward  26.086 inward or outward bot  3.5  6.9
  x)".( wgfjz     10.621 adjacent         9.099 shift adjacent    sum 48.7 51.3
       ┬á           4.421 no hand altern. 43.359 two hand altern.
                   2.661 seesaw           6.645 indir same finger
                  8.2  8.6 18.9 13.0 --.- --.- 19.0 11.5  9.9 10.8 Sh  1.8  1.0


ParensPreferred  279.941 total effort   189.530 positional effort    left right
                   1.242 same finger rp  19.943 shift same finger top 12.9 13.4
  byou' kdclpq    70.243 hand alternat.  26.526 shift hand alter. mid 32.3 31.0
  hiea. mtsrnv     3.310 inward/outward  25.962 inward or outward bot  3.5  6.9
  x()," wgfjz     10.502 adjacent         9.082 shift adjacent    sum 48.7 51.3
       ┬á           4.421 no hand altern. 43.359 two hand altern.
                   2.609 seesaw           6.627 indir same finger
                  8.2  8.6 18.6 13.3 --.- --.- 19.0 11.5  9.9 10.8 Sh  1.8  1.0


ParensPreferred2 279.945 total effort   189.530 positional effort    left right
                   1.242 same finger rp  19.943 shift same finger top 12.9 13.4
  byou' kdclpq    70.243 hand alternat.  26.526 shift hand alter. mid 32.3 31.0
  hiea. mtsrnv     3.308 inward/outward  25.963 inward or outward bot  3.5  6.9
  x)(," wgfjz     10.492 adjacent         9.099 shift adjacent    sum 48.7 51.3
       ┬á           4.421 no hand altern. 43.359 two hand altern.
                   2.610 seesaw           6.626 indir same finger
                  8.2  8.6 18.6 13.3 --.- --.- 19.0 11.5  9.9 10.8 Sh  1.8  1.0


PeriodBot        286.922 total effort   192.021 positional effort    left right
                   1.308 same finger rp  19.943 shift same finger top 12.9 13.4
  byou' kdclpq    70.243 hand alternat.  26.526 shift hand alter. mid 31.4 31.0
  hiea" mtsrnv     3.256 inward/outward  25.897 inward or outward bot  4.4  6.9
  x).,( wgfjz     10.539 adjacent         9.099 shift adjacent    sum 48.7 51.3
       ┬á           4.421 no hand altern. 43.359 two hand altern.
                   2.627 seesaw           6.958 indir same finger
                  8.2  8.6 19.8 12.1 --.- --.- 19.0 11.5  9.9 10.8 Sh  1.8  1.0


SwapApos         281.110 total effort   189.254 positional effort    left right
                   1.246 same finger rp  19.943 shift same finger top 12.9 13.4
  byou" kdclpq    70.243 hand alternat.  26.526 shift hand alter. mid 32.3 31.0
  hiea. mtsrnv     3.282 inward/outward  25.958 inward or outward bot  3.5  6.9
  x)',( wgfjz     10.535 adjacent         9.099 shift adjacent    sum 48.7 51.3
       ┬á           4.421 no hand altern. 43.359 two hand altern.
                   2.629 seesaw           6.699 indir same finger
                  8.2  8.6 18.9 13.0 --.- --.- 19.0 11.5  9.9 10.8 Sh  1.8  1.0
                  
```

## Unorganized Thoughts

### Tap vs. hold:

- For the sake of easy numbers, let’s assume a few things:
   - Selecting a key to press takes 0.25 seconds (the decisionmaking time to press this key instead of that key )
      - The decisionmaking time for a second down movement of a key will be less, assuming the presses are next to each other in the key-stream (i.e., aa or aba instead of abca or abcda). Presses directly contiguous take between 0 and 0.125 seconds rather than normal 0.25; presses indirectly contiguous take between 0.125 and 0.25 seconds. These reductions are due to the fact that the cognitive load of this second press is less than acquiring an entirely different key to press.
   - The decisionmaking process for pressing down another key begins as soon as the down movement for the prior key begins, or, in the case of a key getting pressed for a second time, as soon as the first up movement is completed, or, in the case of same finger, as soon as the up movement of the first key is completed.
   - each down movement takes 0.25 seconds to complete 
      - Deciding to release a key takes 0 seconds if done immediately after pressing it, and between 0 and 0.125 seconds if not done immediately after pressing it.
   - Each up movement takes 0.25 seconds to complete
   - For cases of same finger, it takes between 0.125 and 0.25 seconds to move the finger in question from one location to another

### TODO: add Excel Results Table

### Available double-tap triggers:

- code code
- sym sym
- yy
- jj
- xx
- qq

### Available double-tap triggers when not in code mode:
- ((
- ‘’

Not in code mode: keyboard/program keeps track if inside unclosed quotes, “ key will then use single quote to automatically nest (allows us to use ‘ key in accents). “” —> “‘

Redesign Vim modal editing by matching most frequent commands to most frequent letters/symbols, assuming that these letters will be placed in favorable positions on kb layouts, making the vim bindings (relatively) layout independent. < Job for more dedicated/full-time person

Placement of sym layer with right thumb because sym will not be prepended/followed by numbers which require right thumb while code can be (e.g., [1, 2, 3] or 5>3). Assuming accessing shift layer not much difference between code and sym layers.

Command keys (Enter, Tab, Bkspc, Del) go on outer pinkies because don’t want to press them accidentally, not used in rolls/key combinations. Enter goes opposite punctuation. Also frequency considerations.

Punctuation always followed by space/enter can go on shift layer off home row since won’t mess with same finger for most circumstances (: used as punc goes here — used as leader, accessed on number layer — typical disadvantages from holding down don’t apply with thumb key never followed by space). - also goes here so it can be accessed by leader in a home position instead of only accessible by hold-down on middle finger extension. Esc on this layer too.

/ on left due to URLS: more words starting/ending with consonants than vowels (?)

## Other Languages: Goal

To be able to type Latin, German, French, Italian, and Spanish on the normal English layer without dead keys or other complicated methods of character entry and without interfering with Markdown, Org, or LaTeX markup syntax. As much as allowable by optimization constraints, the characters should be easy to memorize (:e —> ë rather than ^e —> ë) and consistent (if ]e —> œ, then it would make sense to use ]a —> æ; pattern: ] + letter —> ligature).

### Character priority:

- ,{letter}
- .{letter}
- ){letter}
- {letter}(
- ‘{letter}
- :{letter}  =  {letter}\`
- characters on non-thumb keys on Code and Sym layers, prioritized by memorability (see below)

Can’t use $ (thumb key > other fingers) since it is used in LaTeX for the inline/display modes of mathematical expressions. (It would be possible to track the opening/closing similar to \` code blocks in MD, but in some circumstances you might want to retain the ability to write accents within an expression.)

Thus far in my layout, ,{letter} is being used to jump into the navigation layer/toggle normal mode in Vim, .{letter} is being used to jump into Greek/Hebrew mode, and ){letter} is being used in command mode. The navigation and command modes are obviously more important than diacritics, and for me the Greek/Hebrew mode is more important as well since I type these languages more frequently than non-English languages with the Latin alphabet (including Latin itself). YMMV

### Memorability considerations:
- \| looks like a macron
- ( looks like a breve or inverted breve
- ) looks like a breve or inverted breve
- { looks kind of like a caron
- } looks kind of like a caron
- : looks like an umlaut/a dieresis
- A typographically smartened ‘ in the middle of a word looks like an acute accent (ex’ample)
- \` looks like a grave accent
- ^ looks like a circumflex accent for Latin scripts (the Greek/Cyrillic circumflex is a tilde accent or inverted breve) or inverted caron
- ~ looks like a tilde accent/the top part of the Spanish letter eñe (ñ)
- The Spanish letter eñe (ñ) looks like n
- , looks like the tail used to form a French c-cedilla (ç), a Romanian t-comma (ț), and a Romanian s-comma (ș).
- A c-cedilla (ç) looks like c, a t-comma (ț) looks like t, and an s-comma (ș) looks like s.
- The German ß is phonetically similar to s, but looks kind of like a capital B
- / looks like the slash in the Norwegian/Danish ø
- \ looks like the slash in the Norwegian/Danish ø, except facing the wrong way
- 0 looks like the circle above the Norwegian/Danish/Swedish å
- The Spanish inverted question mark (¿) looks like ?
- The Spanish inverted exclamation mark (¡) looks like !

### Accents

(in order of frequency: Latin > German, French, Italian > Spanish; presupposing prose mode not code mode; organized by decreasing freq. below)

- macron
   - o(
   - ( never used after letter
- acute accent
   - ‘o
   - ‘ only used before t, s, ve
- umlaut/dieresis
   - :o
   - : never used before letter
- grave accent
   - o\`
   - \` after resets hand for next, code
- circumflex
   - ^o
   - ^ before follows superscript ^{}

Track open \`code blocks\` (markdown) similar to open “. Code mode activated (and hence accents disabled, including grave) in open code blocks.

Brackets are not used with numerical superscripts (e.g., 1.2 x 10^8) in normal use. However, when the superscript is text, brackets become necessary to eliminate ambiguity: this^superscripted text vs. this^{superscripted text}. Thus, ^ before will never cause conflicts since text based superscripts will always use brackets.

No breve is needed since the absence of a macron indicates a short syllable.

### Letters and Ligatures 

(in order of frequency: Latin > German, French, Italian > Spanish; presupposing prose mode not code mode)

German

- ß eszett
   - s(
   - ( >> ‘ for these: ‘s, bot diag>top

French

- ç c-cedilla
   - c(
- œ oe ligature
   - ]e
   - ] before rather than [ after avoids SF
- æ ae ligature
   - ]a 

Spanish

- ñ eñe
   - n(
- ¿ inverted ?
   - ?{letter}
- ¡ inverted !
   - !{letter}

You should customize the typing of diacritics for your use case by looking at character frequency. Since most folks have no use for an automatic layer for Greek/Hebrew and also don’t need macrons, .{letter} and {letter}( should be used for different things.

## Hotstrings/Briefs

KB Briefing: Python script, top 100 or 200 words by freq in english language, use csv file to list word and possible briefs, check possible briefs against Spanish/French/Italian/German/Latin words, use script to match up (non-conflicting) possible briefs to the words that lead to the maximum amount of typing saved.

## AHK Dual Script Modding

- Sending key combinations in combinators
- Being able to easily toggle how Dual sends keys (send-mode input vs send-mode event).
- Making it easy to make all keys (even those that are not dual role keys) send their character on key-up rather than key-down. Consistency would make the “lag effect” (which lessens the faster you go) much easier to bear at slower speeds.
- Figure out non-base-layer hotstrings. Also figure out how to send key combinations in key sequences (e.g., Ctrl+Bkspc, Ctrl+Del).
- Hotstrings for “. o” —> O etc. (auto-capitalize first words of sentences)? Do with foreign letters too?
- Make shift work with macroned letters etc.
- Alt lock (for unicode symbols)?

